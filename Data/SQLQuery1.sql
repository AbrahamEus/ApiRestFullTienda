CREATE DATABASE TIENDA

CREATE TABLE TIENDA (
    IDTIENDA INT PRIMARY KEY IDENTITY(1,1),
    NOMBRE NVARCHAR(100),
    DIRECCION NVARCHAR(200)
);
INSERT INTO TIENDA(NOMBRE,DIRECCION) VALUES('FORD','AV, UNIVERSIDAD CDMX');
SELECT * FROM TIENDA

CREATE TABLE CLIENTE(
IDCLIENTE INT PRIMARY KEY IDENTITY(1,1),
 NOMBRE NVARCHAR(100),
 TELEFONO NVARCHAR(20),
 CORREO NVARCHAR(100) 
);
INSERT INTO CLIENTE(NOMBRE,TELEFONO,CORREO) VALUES('JOSIAS URIEL',5561169855,'agabram-520@gmail.com');
SELECT *FROM CLIENTE;

CREATE TABLE VENDEDOR (
    IDVENDEDOR INT PRIMARY KEY IDENTITY(1,1),
    NOMBRE NVARCHAR(100),
    CORREO NVARCHAR(100)
);
INSERT INTO VENDEDOR VALUES('DAVID','davieusa@gmail.com')
SELECT * FROM VENDEDOR;

CREATE TABLE CAMIONETA (
HAWA NVARCHAR(20) PRIMARY KEY  NOT NULL,
NOMBRE_MODELO NVARCHAR(100) NOT NULL,   
PRECIO_LISTA DECIMAL(10, 2) NOT NULL,
DESCUENTO DECIMAL(5,2) DEFAULT 0
);

INSERT INTO CAMIONETA VALUES('MEX-45-AB','FORD',850000.00,25.00);

SELECT * FROM CAMIONETA;
CREATE TABLE INVENTARIO (
    HAWA NVARCHAR(20) PRIMARY KEY  FOREIGN KEY REFERENCES Camioneta(HAWA),
    EXISTENCIAS INT NOT NULL
);
INSERT INTO INVENTARIO(HAWA,EXISTENCIAS) VALUES('MEX-45-AB',5);
SELECT * FROM INVENTARIO;
CREATE TABLE PEDIDO (
    IDPEDIDO INT PRIMARY KEY IDENTITY(1,1),
    FECHA_PEDIDO DATE,
    IDCLIENTE INT FOREIGN KEY REFERENCES CLIENTE(IDCLIENTE),
    IDVENDEDOR INT FOREIGN KEY REFERENCES VENDEDOR(IDVENDEDOR),
    IDTIENDA INT FOREIGN KEY REFERENCES TIENDA(IDTIENDA),
    DESCUENTO_GLOBAL DECIMAL(5,2) DEFAULT 0,
    ESTATUS NVARCHAR(20) -- Ejemplo: 'Generado', 'Cancelado', 'Pendiente'
);
ALTER TABLE pedido
ALTER COLUMN FECHA_PEDIDO DATETIME2;
DELETE FROM pedido;
select * from inventario;
update pedido set IDCLIENTE =1,IDVENDEDOR=1,IDTIENDA=1 where  IDPEDIDO=3;
update pedido set IDCLIENTE =1,IDVENDEDOR=1,IDTIENDA=1 where  IDPEDIDO=4;
truncate table pedido;
update pedido set FECHA_PEDIDO='06/08/2025', IDCLIENTE =1,IDVENDEDOR=1,IDTIENDA=1, DESCUENTO_GLOBAL=50, ESTATUS='generado' where  IDPEDIDO=5;
CREATE TABLE DETALLEPEDIDO (
    IDDETALLE INT PRIMARY KEY IDENTITY(1,1),
    IDPEDIDO INT FOREIGN KEY REFERENCES PEDIDO(IDPEDIDO),
    HAWA NVARCHAR(20) FOREIGN KEY REFERENCES CAMIONETA(HAWA),
    CANTIDAD INT,
    PRECIOUNITARIO DECIMAL(10,2),
    DESCUENTOPRODUCTO DECIMAL(5,2)
);
update DETALLEPEDIDO set IDPEDIDO =4,HAWA='MEX-45-AB',CANTIDAD=1 where  IDDETALLE=4;
INSERT INTO DETALLEPEDIDO( IDPEDIDO, HAWA, CANTIDAD,PRECIOUNITARIO,DESCUENTOPRODUCTO)
VALUES(1,'MEX-45-AB',1,850000,85.00);
delete from detallepedido;
SELECT *FROM DETALLEPEDIDO;

CREATE TABLE AUDITORIA (
    IDAUDITORIA INT PRIMARY KEY IDENTITY(1,1),
    FECHA_EVENTO DATE,
    IpUsuario NVARCHAR(50),
    ACCION NVARCHAR(200),
    IDPEDIDO INT FOREIGN KEY REFERENCES PEDIDO(IDPEDIDO),
    HAWA NVARCHAR(20) NULL
);


INSERT INTO AUDITORIA(FECHA_EVENTO,IPUSUARIO,ACCION,IDPEDIDO,HAWA) VALUES('10/12/2026','APEM145','AUDITORIA',1,'MEX-45-AB');

SELECT * FROM AUDITORIA;